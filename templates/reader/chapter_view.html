{% extends "base.html" %}
{% block title %}{{ book.name }} {{ chapter }} â€” Scattered Israelites Bible{% endblock %}

{% block content %}
<div class="mb-4 flex items-center justify-between">
  <div>
    <a href="{% url 'chapter-list' book.osis_id %}" class="text-sm text-blue-600 hover:underline">&larr; {{ book.name }}</a>
  </div>
  <div class="flex gap-3 text-sm">
    {% if prev_chapter %}
    <a href="{% url 'chapter-view' book.osis_id prev_chapter %}"
       hx-get="{% url 'verse-list-partial' book.osis_id prev_chapter %}"
       hx-target="#verse-container"
       hx-push-url="{% url 'chapter-view' book.osis_id prev_chapter %}"
       class="text-blue-600 hover:underline">&larr; Chapter {{ prev_chapter }}</a>
    {% endif %}
    {% if next_chapter %}
    <a href="{% url 'chapter-view' book.osis_id next_chapter %}"
       hx-get="{% url 'verse-list-partial' book.osis_id next_chapter %}"
       hx-target="#verse-container"
       hx-push-url="{% url 'chapter-view' book.osis_id next_chapter %}"
       class="text-blue-600 hover:underline">Chapter {{ next_chapter }} &rarr;</a>
    {% endif %}
  </div>
</div>

<h1 class="text-2xl font-bold mb-6">{{ book.name }} {{ chapter }}</h1>

<div id="verse-container">
  {% include "reader/partials/verse_list.html" %}
</div>

<!-- Word detail slide-in panel -->
<div id="word-panel-overlay" class="word-panel-overlay" onclick="closeWordPanel()"></div>
<div id="word-panel" class="word-panel">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-lg font-bold">Word Detail</h2>
    <button onclick="closeWordPanel()" class="text-gray-400 hover:text-gray-600 text-2xl leading-none">&times;</button>
  </div>
  <div id="word-panel-content">
    <p class="text-gray-400 text-sm">Click a word to see its details.</p>
  </div>
</div>

<!-- Bottom navigation -->
<div class="mt-8 flex justify-between text-sm">
  {% if prev_chapter %}
  <a href="{% url 'chapter-view' book.osis_id prev_chapter %}"
     hx-get="{% url 'verse-list-partial' book.osis_id prev_chapter %}"
     hx-target="#verse-container"
     hx-push-url="{% url 'chapter-view' book.osis_id prev_chapter %}"
     class="text-blue-600 hover:underline">&larr; Chapter {{ prev_chapter }}</a>
  {% else %}<span></span>{% endif %}

  {% if next_chapter %}
  <a href="{% url 'chapter-view' book.osis_id next_chapter %}"
     hx-get="{% url 'verse-list-partial' book.osis_id next_chapter %}"
     hx-target="#verse-container"
     hx-push-url="{% url 'chapter-view' book.osis_id next_chapter %}"
     class="text-blue-600 hover:underline">Chapter {{ next_chapter }} &rarr;</a>
  {% else %}<span></span>{% endif %}
</div>
{% endblock %}
