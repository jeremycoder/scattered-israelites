{% extends "base.html" %}
{% load reader_tags %}
{% block title %}{{ book.name }} {{ chapter }}:{{ verse_num }} — Scattered Israelites Bible{% endblock %}

{% block meta %}
<meta name="description" content="{{ meta_description }}">
<meta property="og:title" content="{{ book.name }} {{ chapter }}:{{ verse_num }} — Scattered Israelites Bible">
<meta property="og:description" content="{{ meta_description }}">
{% endblock %}

{% block content %}
<div class="page-nav">
  <a href="{% url 'chapter-view' book.slug chapter %}" class="breadcrumb">&larr; {{ book.name }} {{ chapter }}</a>
  <div class="page-nav-links">
    {% if prev_verse %}
    <a href="{% url 'verse-view' book.slug chapter prev_verse %}" class="nav-link">&larr; Verse {{ prev_verse }}</a>
    {% endif %}
    {% if next_verse %}
    <a href="{% url 'verse-view' book.slug chapter next_verse %}" class="nav-link">Verse {{ next_verse }} &rarr;</a>
    {% endif %}
  </div>
</div>

<h1 class="page-title">{{ book.name }} {{ chapter }}:{{ verse_num }}</h1>

<div class="card mb-card">
  <div class="card-body">
    <div class="verse-words">
      {% for word in words %}
      <a href="{% url 'word-view' book.slug chapter verse_num word.slug %}"
         class="word-cell">
        <span class="word-surface hebrew">{{ word.surface }}</span>
        <span class="word-gloss">{{ glosses|dict_get:word.strongs_id }}</span>
        <span class="word-morph-code">{{ word.morphology }}</span>
      </a>
      {% endfor %}
    </div>
  </div>
</div>

<h2 class="section-heading">Words in this verse</h2>
<div class="card mb-card">
  <table class="detail-table">
    <thead>
      <tr>
        <th>#</th>
        <th class="text-right">Hebrew</th>
        <th>Gloss</th>
        <th>Morphology</th>
        <th>Strong's</th>
      </tr>
    </thead>
    <tbody>
      {% for word in words %}
      <tr>
        <td class="col-muted">{{ word.position }}</td>
        <td class="col-hebrew">
          <a href="{% url 'word-view' book.slug chapter verse_num word.slug %}"
             class="col-link hebrew" dir="rtl">{{ word.surface }}</a>
        </td>
        <td>{{ glosses|dict_get:word.strongs_id }}</td>
        <td class="col-mono">{{ word.morphology }}</td>
        <td class="col-muted">{{ word.strongs_id|default:"" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="bottom-nav">
  {% if prev_verse %}
  <a href="{% url 'verse-view' book.slug chapter prev_verse %}" class="nav-link">&larr; Verse {{ prev_verse }}</a>
  {% else %}<span></span>{% endif %}

  {% if next_verse %}
  <a href="{% url 'verse-view' book.slug chapter next_verse %}" class="nav-link">Verse {{ next_verse }} &rarr;</a>
  {% else %}<span></span>{% endif %}
</div>
{% endblock %}
